language: go

before_install:
  - mkdir -p $GOPATH/src/github.com/hashicorp/
  - git clone -b assorted-fixes https://github.com/freeekanayaka/raft.git $GOPATH/src/github.com/hashicorp/raft
  - go get github.com/mattn/goveralls
  - go get github.com/golang/lint/golint
  - go get github.com/tsenart/deadcode
  - go get github.com/kisielk/errcheck

script:
  - go vet
  - golint
  - deadcode
  - GO_RAFT_TEST_LATENCY=2.0 $HOME/gopath/bin/goveralls -service=travis-ci -flags -test.timeout -flags 15s

go:
  - "1.9"
  - "1.10"
